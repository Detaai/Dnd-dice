<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Dice Roller</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        :root{
            --bg-1: #0f1720;
            --bg-2: #11131a;
            --card: rgba(255,255,255,0.03);
            --muted: #cbd5da;
            --accent: #6bd6ff;
            --accent-2: #6fcf9f;
            --glass: rgba(255,255,255,0.04);
        }
        html,body{height:100%;}
        body {
            font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            background: linear-gradient(180deg,var(--bg-1),var(--bg-2));
            color: #eef2f7;
            margin: 0;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }
        .container{max-width:1180px;margin:28px auto;padding:0 16px;}
        h1,h2,h3{margin:0 0 8px 0}
        #dice-title{font-weight:800;margin-top:8px;color:var(--accent);letter-spacing:0.6px}
        .char-header{display:flex;align-items:center;justify-content:space-between;gap:18px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 30px rgba(2,6,23,0.6)}
        .char-name{font-size:1.45rem;color:#fff}
        .char-sub{color:var(--muted)}

        /* Cards grid */
        .cards-grid{display:grid;grid-template-columns:1fr;gap:20px;margin-top:18px;justify-items:center}
        @media(min-width:980px){.cards-grid{grid-template-columns:1fr 1fr}}
        .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 12px 30px rgba(2,6,23,0.6);width:100%;max-width:560px;transition:transform .18s ease,box-shadow .18s ease;}
        .card:hover{transform:translateY(-6px);box-shadow:0 22px 48px rgba(2,6,23,0.7)}
        .card h3{font-size:1.15rem;color:var(--accent-2);text-align:center}

        /* Buttons */
        button{font-family:inherit}
        .btn{display:inline-flex;align-items:center;gap:8px;border-radius:10px;padding:10px 14px;border:none;cursor:pointer;font-weight:600}
        .btn:disabled{opacity:0.5;cursor:not-allowed;filter:grayscale(20%)}
        .weapon-btn{background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:10px;transition:all .18s ease;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
        .weapon-btn:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(2,6,23,0.55)}

        .primary-action{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#07211f;border:0;padding:12px 18px;border-radius:10px}
        .primary-action:hover{filter:brightness(.98);transform:translateY(-3px)}
        .secondary-action{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#e6eef3}

        /* Magic UI toggles */
        .segmented{display:flex;gap:8px;justify-content:center}
        .seg-btn{padding:8px 12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted);cursor:pointer}
        .seg-btn.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#07211f;border-color:transparent}
        .spell-tabs{display:flex;gap:8px;margin-top:8px}
        .tab{padding:6px 10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted);cursor:pointer}
        .tab.active{background:rgba(255,255,255,0.06);color:#fff}

        /* Panels */
        .panel{display:none;animation:fadeIn .18s ease forwards}
        .panel.visible{display:block}

        @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

        /* Results */
        #weapon-output{min-height:120px;text-align:center}
        #magic-output{color:#e8d7ff}
        #spell-slots{font-weight:700;color:var(--muted);margin-top:10px;text-align:center}

        /* small helpers */
        .card-actions{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
        .char-field{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:8px}
        .char-header{align-items:center}
    </style>
</head>
<body>
    <div class="container">
        <div class="char-header">
            <div class="char-left">
                <div class="char-name" contenteditable="true">Thaine</div>
                <div class="char-sub" contenteditable="true">Ranger Artificer • Level 5 • Half elf</div>
            </div>
            <div class="char-right">
                <div class="char-field">Class: <span contenteditable="true">Ranger Artificer</span></div>
                <div class="char-field">Level: <span contenteditable="true">5</span></div>
                <div class="char-field">Race: <span contenteditable="true">Half elf</span></div>
            </div>
        </div>
        <h1 id="dice-title" style="cursor:pointer;">D&D Dice Roller</h1>
        <label id="choose-label" for="dice-select" style="cursor:pointer;">Choose a die:</label>
        <label for="dice-count">Number of dice:</label>
        <input type="text" id="dice-count" value="1" style="width:50px;">
        <div id="dice-selectors" style="margin:10px 0;"></div>
        <button id="roll-btn">Roll!</button>
        <div id="dice-faces" style="display:flex;justify-content:center;gap:20px;margin-top:20px;"></div>
        <div id="dice-total" style="font-size:2em;margin-top:20px;"></div>
        <div id="fail-message" style="display:none;font-size:3em;font-weight:bold;color:red;margin-top:30px;"></div>
    </div>
    
    <!-- Character Weapons Section -->
    <div class="container" style="margin-top: 40px; border-top: 2px solid #444; padding-top: 30px;">
        <h2>Character Weapons</h2>
        
        <div class="cards-grid">
            <!-- Initiative Card -->
            <div class="card" id="initiative-card">
                <h3>Initiative</h3>
                <div class="card-actions">
                    <button class="weapon-btn" onclick="rollInitiative()">Roll Initiative (1d20 + 2)</button>
                    <button class="weapon-btn" onclick="showPdf('Thaine-lv-5.pdf','Thaine-lv-5.pdf')" style="margin-left:10px;">Open Thaine-lv-5.pdf</button>
                </div>
                    <div style="margin-top:12px; text-align:center;">
                    <div style="font-weight:800; font-size:0.95rem; color:var(--muted); margin-bottom:6px;">Health</div>
                    <div id="health-display" style="font-size:1.5rem; font-weight:700; color:#fff;">45 / 45
                    </div>
                    <div style="margin-top:10px;display:flex;gap:8px;justify-content:center;align-items:center;">
                        <input id="health-custom" type="number" placeholder="10" style="width:100px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff;text-align:center;" />
                        <button class="weapon-btn secondary-action" onclick="applyCustomHealthSub()">Apply -</button>
                        <button class="weapon-btn secondary-action" onclick="applyCustomHealthAdd()">Apply +</button>
                    </div>
                </div>
            </div>

            <!-- Magic Card (Primary actions) -->
            <div class="card magic" id="magic-card">
                <h3>Magic</h3>
                <div class="card-actions">
                    <button class="weapon-btn secondary-action" onclick="openMagicRingSelector()">Magic Rings</button>
                    <button class="weapon-btn secondary-action" onclick="longRest()">Long Rest</button>
                </div>
                    <div id="ring-status" style="display: none; margin-top: 12px; padding: 12px; background: #333; border-radius: 8px; border: 2px solid #888; color:#fff;">
                        <h3 style="color: #0f0; margin-top:0;">Equipped Magic Rings</h3>
                        <div id="equipped-rings" style="text-align: left; color: #fff;"></div>
                    </div>
                    <div style="margin-top:12px;">
                        <div class="segmented">
                            <div class="seg-btn active" id="cantrip-toggle" onclick="showCantripPanel()">Cantrips</div>
                            <div class="seg-btn" id="spells-toggle" onclick="showSpellsPanel()">Spells</div>
                        </div>

                        <div id="cantrip-panel" class="panel visible">
                            <div class="card-actions" style="gap:10px; flex-wrap:wrap;">
                                <button class="weapon-btn primary-action" onclick="showCantrip('mending')">Mending</button>
                                <button class="weapon-btn primary-action" onclick="showCantrip('mage-hand')">Mage Hand</button>
                                <button id="disguise-btn" class="weapon-btn primary-action" onclick="toggleDisguiseSelf()">Disguise Self (Toggle)</button>
                            </div>
                        </div>

                        <div id="spells-panel" class="panel">
                            <div class="spell-tabs">
                                <div class="tab active" id="tab-action" onclick="showSpellGroup('action')">Action</div>
                                <div class="tab" id="tab-reaction" onclick="showSpellGroup('reaction')">Reaction</div>
                                <div class="tab" id="tab-bonus" onclick="showSpellGroup('bonus')">Bonus Action</div>
                            </div>
                            <div id="spells-action" class="panel visible">
                                <div class="card-actions" style="gap:10px; flex-wrap:wrap;">
                                    <button id="faerie-btn" class="weapon-btn primary-action" onclick="castFaerieFire()">Faerie Fire (Save)</button>
                                    <button id="cure-btn" class="weapon-btn primary-action" onclick="castCureWounds()">Cure Wounds</button>
                                </div>
                            </div>
                            <div id="spells-reaction" class="panel">
                                <div class="card-actions" style="gap:10px; flex-wrap:wrap;">
                                    <button id="absorb-btn" class="weapon-btn primary-action" onclick="toggleAbsorbElements()">Absorb Elements (Toggle)</button>
                                </div>
                            </div>
                            <div id="spells-bonus" class="panel">
                                <div class="card-actions" style="gap:10px; flex-wrap:wrap;">
                                    <button id="hunter-btn" class="weapon-btn primary-action" onclick="castHuntersMark()">Hunter's Mark</button>
                                    <button id="zephyr-btn" class="weapon-btn primary-action" onclick="castZephyrStrike()">Zephyr Strike</button>
                                </div>
                            </div>
                        </div>

                        <div id="spell-slots" style="margin-top:10px; color:#e8e8e8; font-weight:700;">Spell Slots: 5/5</div>
                        <div id="magic-output" style="margin-top:10px; color:#fff; text-align:left;"></div>
                        <div id="active-effects" style="margin-top:12px; text-align:left; color:#fff; display:block;">
                            <h4 style="margin:6px 0 8px 0; color:#ffd9f7;">Active Effects</h4>
                            <div id="active-effects-list" style="color:#e8e8e8;">No active effects.</div>
                        </div>
                    </div>
            </div>

            <!-- Weapons Card (Secondary actions) -->
            <div class="card" id="weapons-card">
                <h3>Weapons</h3>
                <div class="card-actions">
                    <button class="weapon-btn secondary-action" onclick="openMagicWeaponsModal()">Magic Weapons</button>
                </div>
                <div class="card-subsection">
                    <h4 style="margin:0 0 8px 0; color:#dfe6e9;">Short Range</h4>
                    <div class="card-actions">
                        <button class="weapon-btn secondary-action" data-attack="true" onclick="rollShortRangeFirstTurn()">First Turn (3d6 + 1d8 + DC 12 Wis)</button>
                        <button class="weapon-btn secondary-action" data-attack="true" onclick="rollShortRangeOtherTurns()">Other Turns (2d6 + 2 + DC 12 Wis)</button>
                    </div>
                </div>
                <div class="card-subsection" style="margin-top:12px;">
                    <h4 style="margin:0 0 8px 0; color:#dfe6e9;">Long Range</h4>
                    <div class="card-actions">
                        <button class="weapon-btn secondary-action" data-attack="true" onclick="rollLongRangeFirstTurn()">First Turn (2d6 + 2d8 + 10)</button>
                        <button class="weapon-btn secondary-action" data-attack="true" onclick="rollLongRangeOtherTurns()">Other Turns (2d6 + 1d8 + 10)</button>
                    </div>
                </div>
            </div>

            <!-- Results Card -->
            <div class="card" id="results-card">
                <h3>Results</h3>
                <div id="weapon-output" style="font-size: 1.5em; color: #0f0;"></div>
            </div>
        </div>

        <!-- Magic Ring Selection Modal -->

        <div id="ring-selector-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center;">

            <div style="background: #333; padding: 30px; border-radius: 10px; border: 2px solid #888; max-width: 500px; width: 90%;">

                <h3 style="margin-top: 0; color: #0f0;">Select Magic Rings (Max 3)</h3>

                <div id="ring-list" style="margin: 20px 0; text-align: left;">

                    <label style="display: block; margin: 10px 0; padding: 10px; background: #444; border-radius: 5px; cursor: pointer;">

                        <input type="checkbox" value="echo-band" style="margin-right: 10px;">

                        <span style="color: #fff; font-weight: bold;">Echo Band</span>

                        <div style="color: #aaa; font-size: 0.9em; margin-top: 5px; margin-left: 25px;">Create an echo of any object that fully passes through, this echo follows the exact path of the original and cannot be separated, the echo only lasts for one minute and does half damage</div>

                    </label>

                </div>

                <div style="margin-top: 20px; text-align: center;">

                    <button class="weapon-btn" onclick="confirmRingSelection()" style="margin: 5px;">Continue</button>

                    <button class="weapon-btn" onclick="closeRingSelector()" style="margin: 5px;">Cancel</button>

                </div>

            </div>

        </div>

        <!-- Magic Weapons Selection Modal -->
        <div id="weapons-selector-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center;">
            <div style="background: #333; padding: 30px; border-radius: 10px; border: 2px solid #888; max-width: 500px; width: 90%;">
                <h3 style="margin-top: 0; color: #0f0;">Select Magic Weapons (Max 3)</h3>
                <div id="weapons-slot-counter" style="margin: 10px 0; color: #fff; font-weight: bold;"></div>
                <div id="weapons-list" style="margin: 20px 0; text-align: left;"></div>
                <div style="margin-top: 20px; text-align: center;">
                    <button class="weapon-btn" onclick="confirmMagicWeaponSelection()" style="margin: 5px;">Confirm</button>
                    <button class="weapon-btn" onclick="closeMagicWeaponsModal()" style="margin: 5px;">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="pdf-viewer-modal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center; align-items: center;">
        <div style="width: 90%; height: 90%; background: #111; border-radius: 8px; padding: 12px; box-sizing: border-box; position: relative;">
            <button class="weapon-btn" onclick="closePdfViewer()" style="position: absolute; top: 12px; right: 12px;">Close</button>
            <iframe id="pdf-frame" src="" style="width:100%; height:100%; border: none; border-radius: 6px;"></iframe>
        </div>
    </div>
    
    <script src="dice.js"></script>
</body>
</html>


